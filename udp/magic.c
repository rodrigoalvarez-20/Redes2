#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <string.h>

int main()
{

    struct sockaddr_in sock;
    int bSock;

    bSock = socket(AF_INET, SOCK_DGRAM, 0);
    int bEnable = 1;

    if (bSock < 0)
    {
        perror("Ha ocurrido un error al crear el socket.\n");
        exit(-1);
    }

    if (setsockopt(bSock, SOL_SOCKET, SO_BROADCAST, &bEnable, sizeof(bEnable)) < 0)
    {
        perror("Error en SetSockOpt: ");
        exit(-1);
    }

    int len = sizeof(sock);

    //18C04D64A55C

    char msg[] = {0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c,
                  0x18, 0xc0, 0x4d, 0x64, 0xa5, 0x5c};

    sock.sin_family = AF_INET;
    sock.sin_port = htons(9);
    sock.sin_addr.s_addr = INADDR_BROADCAST;
    //sock.sin_addr.s_addr = inet_addr("138.186.28.183");
    //inet_aton("", &sock.sin_addr.s_addr);

    sendto(bSock, msg, strlen(msg) + 1, 0, (struct sockaddr *)&sock, sizeof(sock));

    return 0;
}